# Репликация базы данных

Сборка и запуск.

```
docker-compose build && docker-compose up
```

Создаем папку на рабочем столе.

Папка будет общей для данного компьютера и контейнера.

```
/Users/maxim/Desktop/aaa
```

Смотрим запущенные контейнеры.

```
docker ps
```

Подключаемся к контейнеру с возможностью ввода команд.

```
docker exec -i -t eec60636a5a0 bash
```

Меняем текущего пользователя.

```
su - postgres
```

Делаем репликацию.

Данные должны сохраниться в папку "aaa" на рабочем столе.

```
pg_dump base -p 5432 >> /exported_data/replicationOfBase.sql
```

При необходимости можно начать работать с базами данных в контейнере.

```
psql postgres
```

## Восстановление базы данных из файла

Подключаемся к СУБД.

Работаем уже НЕ в контейнере.

```
psql postgres
```

Создаем базу данных.

```
CREATE DATABASE bbbbbb;
```

Отключаемся от СУБД.

```
\q
```

Восстанавливаем из файла базу данных.

```
psql -d 'bbbbbb' -f '/Users/maxim/Desktop/aaa/replicationOfBase.sql'
```

Теперь в базе данных на копьютере хранится копия базы данных из контейнера.

## Запускаем команды из файла

Запустим на выполнение файл myfile

```
psql \i  '/home/maxim/Рабочий стол/myfile'
```

